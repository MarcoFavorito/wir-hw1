<HTML><HEAD>   <TITLE>Chapter 1 - Let's write a C program</TITLE>   <META NAME="Author" CONTENT="Camil Demetrescu"></HEAD><BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#551A8B" ALINK="#0000FF"><P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><I><font color="#00007F" size="3">Chapter   1- Writing C programs</font></I></font><HR WIDTH="100%"><p></P><P><font face="Verdana, Arial, Helvetica, sans-serif" size="2">In this chapter   you will see two step-by-step examples showing how to use Leonardo to write,   compile and execute a C program. Chapters 5, 6, 7 and 8 will give you more information   about these topics.</font></P><P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="A simple example: sorting an array of numbers"></A><FONT COLOR="#990000">1.1   - A simple example: sorting an array of numbers</FONT></font></P><UL>  <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">We're     going to implement the well known Bubblesort algorithm. Since it's really     simple we will focus on the steps required to write, compile and execute it     in Leonardo, rather than on its behaviour.</font></P>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="Step 1: creating a C project"></A><B><FONT COLOR="#007F00">Step     1: creating a C project</FONT></B></font></P>  <UL>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">In       the C language a program is a collection of <TT>translation units</TT>,       stored in files with &quot;<TT>.c</TT>&quot; extension. This allows you       to have separate modules and to solve problems independently, which makes       it easier to develop large and complex C programs. A C project is a list       of all files that make up a C program: in this way, the compiler is able       to compile each file in this list, and eventually, if no error was found,       to link together all pieces of code to build an executable file.</font></P>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Now       we have to create a new C project. Launch Leonardo's application from the       Finder and choose <TT>New</TT> + <TT>C Project</TT> from the <TT>File </TT>menu:</font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_1.GIF" HSPACE=20 VSPACE=20 BORDER=1 HEIGHT=214 WIDTH=361></font></P>    </CENTER>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">The       following dialog will appear:</font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_2.GIF" HSPACE=20 VSPACE=20 HEIGHT=200 WIDTH=356></font></P>    </CENTER>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Select your       destination folder (a good choice may be the Desktop Folder), change <TT>Untitled       </TT>with <TT>Bubblesort </TT>and save. Now your new project file has been       created (note a folder that contains it is created too): </font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_4.GIF" HSPACE=20 VSPACE=20 HEIGHT=197 WIDTH=302></font></P>    </CENTER>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Note       it just contains two files given by default: <TT>ANSI.c</TT> and <TT>visualizer.c</TT>.       By now ignore them.</font></P>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Now,       select the <IMG SRC="Images/Pic_1_3.GIF" HSPACE=10 VSPACE=5 HEIGHT=28 WIDTH=28 ALIGN=ABSCENTER>button       in the C project window. In this way you will be asked for the name of a       new file to be added to your project:</font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_5.GIF" HSPACE=20 VSPACE=20 HEIGHT=106 WIDTH=273></font></P>    </CENTER>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Type       <TT>Bubblesort </TT>and click on the <TT>OK </TT>button. Now the file <TT>Bubblesort.c</TT>       has been created within the &quot;<TT>Bubblesort.&micro; f</TT>&quot;<TT>       </TT>folder, and it has been added to your project. A text editor window       appears on your screen:</font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_6.GIF" HSPACE=20 VSPACE=20 HEIGHT=254 WIDTH=437></font></P>    </CENTER>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Now       we're ready to write our program.</font></P>  </UL>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="Step 2: writing the program"></A><B><FONT COLOR="#007F00">Step     2: writing the program</FONT></B></font></P>  <UL>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">There's       nothing remarkable about it. Just paste the following <A HREF="CodeSnippets/BubbleSort.c" TARGET="_blank">piece       of code</A> in Leonardo's text editor window : </font></P>    <UL>      <TABLE BORDER=1 CELLPADDING=10 >        <TR>           <TD NOWRAP WIDTH="50%" BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">#include             </FONT><FONT COLOR="#000000">&lt;stdio.h&gt;</FONT></TT> </font>             <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int               </FONT><FONT COLOR="#000000">n; </FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">long               </FONT><FONT COLOR="#000000">v[100];</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">void               </FONT><FONT COLOR="#000000">BubbleSort(</FONT><FONT COLOR="#0000FF">long               </FONT><FONT COLOR="#000000">v[],</FONT><FONT COLOR="#0000FF">int               </FONT><FONT COLOR="#000000">n){</FONT></TT></font></P>            <UL>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int                 </FONT><FONT COLOR="#000000">i=-1,another,q; </FONT></TT></font></P>            </UL>            <UL>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">do                 </FONT><FONT COLOR="#000000">{ </FONT></TT></font></P>              <UL>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">another=0;                   </FONT></TT></font></P>              </UL>            </UL>            <UL>              <UL>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for                   </FONT><FONT COLOR="#000000">(i=1;i&lt;n;i++) </FONT></TT></font></P>                <UL>                  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">if                     ((v[i-1]&gt;v[i])) { </FONT></TT></font></P>                  <UL>                    <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">long                       </FONT><FONT COLOR="#000000">temp=v[i-1]; </FONT></TT></font></P>                    <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">v[i-1]=v[i];                       </FONT></TT></font></P>                    <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">v[i]=temp</FONT></TT></font></P>                    <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">another=1;</FONT></TT></font></P>                  </UL>                  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}                     </FONT></TT></font></P>                </UL>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}                   </FONT><FONT COLOR="#0000FF">while </FONT><FONT COLOR="#000000">(another);                   </FONT></TT></font></P>              </UL>            </UL>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}</FONT></TT></font></P>          </TD>          <TD VALIGN=TOP NOWRAP WIDTH="50%" BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">void             </FONT><FONT COLOR="#000000">main(){ </FONT></TT> </font>             <UL>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int                 </FONT><FONT COLOR="#000000">i;</FONT></TT></font></P>            </UL>            <UL>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">printf</FONT><FONT COLOR="#000000">(&quot;How                 many numbers ? &quot;); </FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">scanf</FONT><FONT COLOR="#000000">(&quot;%d&quot;,&amp;n);</FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for                 </FONT><FONT COLOR="#000000">(i=0;i&lt;n;i++) { </FONT></TT></font></P>              <UL>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">printf</FONT><FONT COLOR="#000000">(&quot;Enter                   number #%d: &quot;,i); </FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">scanf</FONT><FONT COLOR="#000000">(&quot;%ld&quot;,&amp;v[i]);                   </FONT></TT></font></P>              </UL>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}</FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">Bubblesort(v,n);</FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for                 </FONT><FONT COLOR="#000000">(i=0;i&lt;n;i++) </FONT></TT></font></P>              <UL>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">printf</FONT><FONT COLOR="#000000">(&quot;v[%d]=%ld\n&quot;,i,v[i]);                   </FONT></TT></font></P>              </UL>            </UL>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}</FONT></TT></font></P>          </TD>        </TR>      </TABLE>    </UL>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Note       that:</font></P>    <UL>      <LI><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">this         program holds an array <TT>v</TT> of numbers having size <TT>n</TT>, declared         at the very beginning of the text;</font></LI>      <LI><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">then         we declare the <TT>bubblesort()</TT> function that takes as input both         an array of numbers and a number of items;</font></LI>      <LI><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">at         last we have the <TT>main()</TT> function that asks the user for data         to be used to initialize the array of numbers, calls the <TT>BubbleSort()</TT>         function and prints out the sorted array;</font></LI>      <LI><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">for         the sake of simplicity, we have omitted any array bound checking. Actually,         no more than 100 items can be stored in the array.</font></LI>    </UL>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">You       will notice the text editor performs syntax coloring of sources, auto-indentation       and parenthesis matching.</font></P>  </UL>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="Step 3: checking program's syntax"></A><B><FONT COLOR="#007F00">Step     3: checking program's syntax</FONT></B></font></P>  <UL>    <P><font color="#000000" face="Verdana, Arial, Helvetica, sans-serif" size="2">Now       let's check program's syntax: </font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_7.GIF" HSPACE=20 VSPACE=20 BORDER=1 HEIGHT=193 WIDTH=383></font></P>    </CENTER>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">The following       error window will appear:</font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_8.GIF" HSPACE=20 VSPACE=20 HEIGHT=255 WIDTH=449></font></P>    </CENTER>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">There are two       errors and one warning: we have forgotten a semicolon and we have written       <TT>Bubble<B><FONT COLOR="#B30000">s</FONT></B>ort </TT>instead of <TT>Bubble<B><FONT COLOR="#990000">S</FONT></B>ort </TT>(note C is case-sensitive). Moreover, we       have declared a variable (q) that has never been used in the <TT>BubbleSort       </TT>function. </font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Note the error       window is clickable: just click on an error (or warning) pane and you will       jump to the text window containing the error, highlighted and ready to be       corrected.</font></P>    <TABLE CELLSPACING=0 CELLPADDING=0 WIDTH="87%" HEIGHT="25" BGCOLOR="#E6E6E6" >      <TR ALIGN=CENTER VALIGN=CENTER>         <TD ALIGN=CENTER VALIGN=CENTER WIDTH="8%" BGCOLOR="#B3B3B3"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><B><FONT COLOR="#0000FF">Tip:</FONT></B></font></TD>        <TD ALIGN=CENTER VALIGN=CENTER NOWRAP><font face="Verdana, Arial, Helvetica, sans-serif" size="2">To           bring the error window to the front type Command<TT>+I</TT> or select           it from the <TT>Window </TT>menu.</font></TD>      </TR>    </TABLE>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Correct your       source code and retry ... it should be OK now.</font></P>  </UL>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="Step 4: running the program"></A><B><FONT COLOR="#007F00">Step     4: running the program</FONT></B></font></P>  <UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Now we are       ready to run our first program.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Type <TT>Command       + R</TT> (or select <TT>Run </TT>from the <TT>Run </TT>menu) to compile,       link and launch your program.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">The execution       environment should appear:</font></P>    <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_9.GIF" HSPACE=20 VSPACE=20 BORDER=1 HEIGHT=480 WIDTH=640></font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">The execution       environment is made of at least three main windows:</font></P>    <UL>      <LI><font size="2" face="Verdana, Arial, Helvetica, sans-serif">the <B>program         trace window</B>, with the current instruction highlighted</font></LI>      <LI><font size="2" face="Verdana, Arial, Helvetica, sans-serif">the <B>console</B>,         used to interact with your program by means of I/O instructions</font></LI>    </UL>    <UL>      <LI><font size="2" face="Verdana, Arial, Helvetica, sans-serif">the <B>control         tool</B>, used to control the execution of your program.</font></LI>    </UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Now press the       forward step button<IMG SRC="Images/Pic_1_11.GIF" HSPACE=10 VSPACE=2 HEIGHT=28 WIDTH=28 ALIGN=ABSCENTER>:       the first <TT>printf </TT>instruction is executed, showing the text &quot;<TT>How       many numbers ?</TT>&quot; in the console window.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Now press the       backward step button<IMG SRC="Images/Pic_1_13.GIF" HSPACE=10 VSPACE=2 HEIGHT=28 WIDTH=28 ALIGN=ABSCENTER>:       the <TT>printf </TT>instruction has been reversed, and the text &quot;<TT>How       many numbers ?</TT>&quot; disappears from the console.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">If you want       to execute your program in a continuous mode, press the forward continuous       execution button<IMG SRC="Images/Pic_1_12.GIF" HSPACE=10 VSPACE=2 HEIGHT=28 WIDTH=28 ALIGN=ABSCENTER>.       </font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">At the end       of a typical execution session you will be in the following situation:</font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_10.GIF" HSPACE=20 VSPACE=20 BORDER=1 HEIGHT=480 WIDTH=640></font></P>    </CENTER>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Note your input       is red, while program's output is black.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Try pressing       repeatedly <IMG SRC="Images/Pic_1_13.GIF" HSPACE=10 VSPACE=2 HEIGHT=28 WIDTH=28 ALIGN=ABSCENTER>to       test the backward mode.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">If you want       to reset your program in one hop, press<IMG SRC="Images/Pic_1_14.GIF" HSPACE=10 VSPACE=2 HEIGHT=28 WIDTH=28 ALIGN=ABSCENTER>.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">If you want       to execute it in backward mode, press<IMG SRC="Images/Pic_1_15.GIF" HSPACE=10 VSPACE=2 HEIGHT=28 WIDTH=28 ALIGN=ABSCENTER>.</font></P>  </UL>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="Step 5: abort program's execution"></A><B><FONT COLOR="#007F00">Step     5: abort program's execution</FONT></B></font></P>  <UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">When a program's       execution reaches the end, it does not mean the process is really terminated:       actually you can reverse the execution and play it backward and forward       as long as you like.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">If you want,       instead, to remove your process from memory by closing its execution environment,       you should click on the go-away button of the control tool:</font></P>    <CENTER>      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><IMG SRC="Images/Pic_1_16.GIF" HSPACE=20 VSPACE=20 BORDER=1 HEIGHT=118 WIDTH=373></font></P>    </CENTER>  </UL>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="Step 6: adding breakpoints to your program"></A><B><FONT COLOR="#007F00">Step     6: adding breakpoints to your program</FONT></B></font></P>  <UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">A breakpoint       is a special marker that tells the execution environment to stop when program's       control flow reaches it. This may be very useful for debugging purposes.       Unfortunately you can add breakpoints only at compile time, by means of       the special directive:</font></P>    <TABLE CELLSPACING=0 CELLPADDING=0 WIDTH="87%" BGCOLOR="#FFFFFF" >      <TR ALIGN=CENTER VALIGN=CENTER BGCOLOR="#E6E6E6">         <TD HEIGHT="25"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">#pragma</FONT>           breakpoint</TT></font></TD>      </TR>    </TABLE>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">This directive       may be put anywhere in the source code, <B>provided it is used as statement</B>.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Let's add a       simple breakpoint to our example:</font></P>    <UL>      <CENTER>        <TABLE BORDER=1 CELLPADDING=10 >          <TR>             <TD VALIGN=TOP WIDTH="50%" BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">void               </FONT><FONT COLOR="#000000">main(){ </FONT></TT> </font>               <UL>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">...</FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">Bubblesort(v,n);</FONT></TT></font></P>                <TABLE CELLSPACING=0 CELLPADDING=2 BGCOLOR="#D9D9D9" >                  <TR ALIGN=CENTER VALIGN=CENTER>                     <TD ALIGN=CENTER VALIGN=CENTER NOWRAP><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">#pragma                       </FONT><FONT COLOR="#000000">breakpoint</FONT></TT></font></TD>                  </TR>                </TABLE>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for                   </FONT><FONT COLOR="#000000">(i=0;i&lt;n;i++) </FONT></TT></font></P>                <UL>                  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">printf</FONT><FONT COLOR="#000000">(&quot;v[%d]=%ld\n&quot;,i,v[i]);                     </FONT></TT></font></P>                </UL>              </UL>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}</FONT></TT></font></P>            </TD>          </TR>        </TABLE>      </CENTER>    </UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">The virtual       machine will stop executing a program, either in forward mode or in backward       mode, every time a breakpoint is encountered.</font></P>  </UL></UL><UL>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><A NAME="Another example: the breadth-first visit of a graph"></A><FONT COLOR="#990000">1.2     - Another example: the breadth-first visit of a graph</FONT></font></P>  <UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">We will not       describe all the steps that we shown in the previous section, so please       look back at it for technical details about compiling and running programs.       </font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">In this section       we will show a simple C implementation of the well-known <TT>breadth-first       visit</TT> (<TT>BFV</TT>) of an undirected graph. For a complete description       of the <TT>BFV </TT>algorithm see: Cormen, Leiserson, Rivest, &quot;Introduction       to Algorithms&quot;, Addison-Wesley.</font></P>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">A trivial <A HREF="CodeSnippets/BFV.c" TARGET="_blank">C       implementation</A> of the <TT>BFV</TT> algorithm is shown below:</font></P>    <UL>      <TABLE BORDER=1 CELLPADDING=10 >        <TR>           <TD><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">#include             </FONT><FONT COLOR="#000000">&lt;stdio.h&gt;</FONT></TT> </font>             <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">#include               </FONT><FONT COLOR="#000000">&lt;stdlib.h&gt;</FONT></TT> </font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">#define</FONT><FONT COLOR="#000000">               MAX_NODES 100</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">#define               </FONT><FONT COLOR="#000000">MAXINT 32767</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#E60000">//               Data structures</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">char               </FONT><FONT COLOR="#000000">g[MAX_NODES][MAX_NODES];</FONT></TT>               </font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int               </FONT>num_nodes<FONT COLOR="#000000">;</FONT></TT> </font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int               </FONT><FONT COLOR="#000000">parent[MAX_NODES]; </FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#E60000">//               Routines</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int               </FONT><FONT COLOR="#000000">load_graph(){ </FONT></TT></font></P>            <BLOCKQUOTE>               <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int                 </FONT><FONT COLOR="#000000">i;</FONT></TT> </font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">if                 </FONT><FONT COLOR="#000000">(!</FONT><FONT COLOR="#007F00">OpenGraph</FONT><FONT COLOR="#000000">())                 </FONT><FONT COLOR="#0000FF">return </FONT><FONT COLOR="#000000">0;                 </FONT><FONT COLOR="#E60000">// Open the graph chooser dialog</FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">if                 </FONT><FONT COLOR="#000000">(MAX_NODES&lt;(</FONT>num_nodes<FONT COLOR="#000000">=</FONT><FONT COLOR="#007F00">GetNodesCount</FONT><FONT COLOR="#000000">()))                 </FONT><FONT COLOR="#0000FF">return </FONT><FONT COLOR="#000000">0;                 </FONT><FONT COLOR="#E60000">// Read the number of nodes</FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for                 </FONT><FONT COLOR="#000000">(i=0 ; i&lt;</FONT><FONT COLOR="#007F00">GetArcsCount</FONT><FONT COLOR="#000000">()                 ; i++) { </FONT><FONT COLOR="#E60000">// Iterate on all edges</FONT></TT></font></P>              <BLOCKQUOTE>                 <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">long                   </FONT><FONT COLOR="#000000">theStart,theEnd; </FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007F00">GetArc</FONT><FONT COLOR="#000000">(i,&amp;theStart,&amp;theEnd);                   </FONT><FONT COLOR="#E60000">// Get the end points of the i-th                   edge</FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">if                   </FONT><FONT COLOR="#000000">(theStart==theEnd) </FONT><FONT COLOR="#0000FF">continue</FONT><FONT COLOR="#000000">;                   </FONT><FONT COLOR="#E60000">// Skip self-loops</FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">g[theStart][theEnd]=g[theEnd][theStart]=1;                   </FONT><FONT COLOR="#E60000">// Set the adjacency matrix</FONT></TT></font></P>              </BLOCKQUOTE>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}                 </FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007F00">CloseGraph</FONT><FONT COLOR="#000000">();                 </FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">return                 </FONT><FONT COLOR="#000000">1;</FONT></TT> </font></P>            </BLOCKQUOTE>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#000000">}</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#E60000">//               Breadth-first visit</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">void               </FONT>BFV(<FONT COLOR="#0000FF">int</FONT> i){</TT></font></P>            <BLOCKQUOTE>               <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int</FONT>                 queue[MAX_NODES]; <FONT COLOR="#E60000">// Declare a local queue</FONT></TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int</FONT>                 front,rear;</TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">do</FONT>                 {</TT></font></P>              <BLOCKQUOTE>                 <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>queue[0]=i;                   <FONT COLOR="#E60000">// Enqueue the initial node</FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>parent[i]=MAXINT;                   <FONT COLOR="#E60000">// Initialize the tree root</FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>front=0;                   <FONT COLOR="#E60000">// Initialize queue's head</FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>rear=1;                   <FONT COLOR="#E60000">// Initialize queue's tail</FONT></TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">while</FONT>                   ((rear-front)!=0) {</TT></font></P>                <BLOCKQUOTE>                   <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int</FONT>                     current,adj;</TT></font></P>                  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>current=queue[front++];                     <FONT COLOR="#E60000">// Dequeue a node</FONT></TT></font></P>                  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">printf</FONT>(&quot;Extracted                     node %d\n&quot;,current); <FONT COLOR="#E60000">// Print extracted                     node</FONT></TT></font></P>                  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for</FONT>                     (adj=0; adj&lt;num_nodes; adj++) <FONT COLOR="#E60000">//                     Scan adjacents of extracted node</FONT></TT></font></P>                  <BLOCKQUOTE>                     <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">if</FONT>                       (g[current][adj]!=0 &amp;&amp; parent[adj]==-1) {</TT></font></P>                    <BLOCKQUOTE>                       <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>parent[adj]=current;                         <FONT COLOR="#E60000">// Put (current,adj) in the tree</FONT></TT></font></P>                      <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>queue[rear++]=adj;                         <FONT COLOR="#E60000">// Enqueue adjacent</FONT></TT></font></P>                    </BLOCKQUOTE>                    <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>}</TT></font></P>                  </BLOCKQUOTE>                </BLOCKQUOTE>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>}</TT></font></P>                <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for</FONT>                   (i=0;i&lt;num_nodes &amp;&amp; parent[i]!=-1;i++); <FONT COLOR="#E60000">//                   Look for another connected component</FONT></TT></font></P>              </BLOCKQUOTE>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>}                 <FONT COLOR="#0000FF">while</FONT> (i&lt;num_nodes); <FONT COLOR="#E60000">//                 Exit when all nodes have been visited</FONT></TT> </font></P>            </BLOCKQUOTE>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>}</TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#E60000">//               Main function</FONT></TT></font></P>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">void</FONT>               <FONT COLOR="#007F00">main</FONT>(){</TT> </font></P>            <BLOCKQUOTE>               <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">int</FONT>                 i;</TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">if</FONT>                 (!load_graph()) <FONT COLOR="#007FCC">exit</FONT>(<FONT COLOR="#007FCC">printf</FONT>(&quot;The                 graph could not be opened\n&quot;));</TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#0000FF">for</FONT>                 (i=0;i&lt;num_nodes;i++) parent[i]=-1;</TT> </font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">printf</FONT>(&quot;Starting                 node ? &quot;);</TT></font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007FCC">scanf</FONT>(&quot;%d&quot;,&amp;i);</TT>                 </font></P>              <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>BFV(i);</TT></font></P>            </BLOCKQUOTE>            <P><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT>}</TT>               </font></P>          </TD>        </TR>      </TABLE>    </UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Note the program       is composed of the following data structures and routines:</font></P>    <CENTER>      <TABLE BORDER=1 CELLSPACING=0 CELLPADDING=5 >        <TR>           <TD ALIGN=CENTER VALIGN=CENTER BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><B><TT><FONT COLOR="#E60000">char             g[MAX_NODES][MAX_NODES]</FONT></TT></B></font></TD>          <TD BGCOLOR="#FFFFCC"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">This             is an adjacency matrix that is used to hold the graph to be visited</font></TD>        </TR>        <TR>           <TD ALIGN=CENTER VALIGN=CENTER BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><B><TT><FONT COLOR="#E60000">int             num_nodes</FONT></TT></B></font></TD>          <TD BGCOLOR="#FFFFCC"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">This             variable holds the number of nodes of the graph</font></TD>        </TR>        <TR>           <TD ALIGN=CENTER VALIGN=CENTER BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><B><TT><FONT COLOR="#E60000">int             parent[MAX_NODES]</FONT></TT></B></font></TD>          <TD BGCOLOR="#FFFFCC"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">This             array is used as a parent-vector to represent the spanning tree generated             by the <TT>BFV </TT>algorithm</font></TD>        </TR>        <TR>           <TD ALIGN=CENTER VALIGN=CENTER BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><B><TT><FONT COLOR="#E60000">load_graph()</FONT></TT></B></font></TD>          <TD VALIGN=CENTER BGCOLOR="#FFFFCC"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">This             function is used to initialize the data structures with a graph retireved             from a graph file or from Leonardo's built-in graph editor</font></TD>        </TR>        <TR>           <TD ALIGN=CENTER VALIGN=CENTER BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><B><TT><FONT COLOR="#E60000">BFV()</FONT></TT></B></font></TD>          <TD BGCOLOR="#FFFFCC"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">This             funtion performs the breadth-first visit of the graph starting from             a given node</font></TD>        </TR>        <TR VALIGN=CENTER>           <TD ALIGN=CENTER VALIGN=CENTER BGCOLOR="#FFFFFF"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><B><TT><FONT COLOR="#E60000">main()</FONT></TT></B></font></TD>          <TD BGCOLOR="#FFFFCC"><font face="Verdana, Arial, Helvetica, sans-serif" size="2">This             funtion calls <TT>load_graph</TT> and then <TT>BFV</TT></font></TD>        </TR>      </TABLE>    </CENTER>  </UL></UL><BLOCKQUOTE>   <UL>    <P><font size="2" face="Verdana, Arial, Helvetica, sans-serif">The program       gets its input by means of the <TT>load_graph</TT> function that uses Leonardo's       sytem calls:</font></P>    <UL>      <LI><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007F00">OpenGraph</FONT>()</TT>:         opens a graph chooser dialog allowing the user to pick up a graph from         a list of all graphs currently available in the main memory (e.g. from         a graph editor's window) and previously saved in the same folder as the         currently executed program.</font> </LI>      <LI><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007F00">GetNodesCount</FONT>()</TT>:         if called between <TT><FONT COLOR="#007F00">OpenGraph</FONT>()</TT> and         <TT><FONT COLOR="#007F00">CloseGraph</FONT>()</TT> yields the number of         nodes of the chosen graph (zero is case of error).</font> </LI>      <LI><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007F00">GetArcsCount</FONT>()</TT>:         if called between <TT><FONT COLOR="#007F00">OpenGraph</FONT>()</TT> and         <TT><FONT COLOR="#007F00">CloseGraph</FONT>()</TT> yields the number of         edges of the chosen graph (zero is case of error).</font> </LI>      <LI><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007F00">GetArc</FONT>(<FONT COLOR="#0000FF">long</FONT>         idx, <FONT COLOR="#0000FF">long</FONT>* start, <FONT COLOR="#0000FF">long</FONT>*         end)</TT>: if called between <TT><FONT COLOR="#007F00">OpenGraph</FONT>()</TT>         and <TT><FONT COLOR="#007F00">CloseGraph</FONT>()</TT> stores in parameters         <TT>*start</TT> and <TT>*end</TT> the end points of the <TT>idx</TT>-th         edge of the chosen graph (<TT>idx</TT> must be in the range <TT>0 </TT>to         <TT><FONT COLOR="#007F00">GetArcsCount</FONT>()-1</TT>).</font> </LI>      <LI><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><TT><FONT COLOR="#007F00">CloseGraph</FONT>()</TT>:         closes a graph retrieval session. </font></LI>    </UL>  </UL></BLOCKQUOTE><CENTER>  <P><font face="Verdana, Arial, Helvetica, sans-serif" size="1">[<A HREF="../Index.html">Index     page</A>]</font></P></CENTER></BODY></HTML>