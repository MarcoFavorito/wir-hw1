<!--
This file was generated by Web C Plus Plus software v0.7.9
Webcpp Copyright (C)2001, (C)2002 Jeffrey Bakker under the GNU GPL
Get webcpp at http://webcpp.sf.net
-->

<html>
<head>
<title>GraficoFunzione.java</title>
<style type="text/css">

/** Webcpp v0.7.0+ compatible StyleSheet http://webcpp.sf.net **/
/** Theme: typical **/

body
{
background-color: #ffffff
}

a:link    {color:#ff0000}
a:visited {color:#666666}
a:active  {color:#0000ff}
a:hover   {color:#00b800}

pre
{
color: #000000
}

font
{
font-size:100%
}

font.preproc
{
color: #00b800
}

font.numbers
{
color: #a900a9
}

font.strings
{
color: #ff0000
}

font.keyword
{
color: #0000ff;
font-weight: bold
}

font.comment
{
color: #666666;
font-style: italic
}

</style>
</head>
<body>
<pre>

<font CLASS=keyword>import</font> java.awt.*;
<font CLASS=keyword>import</font> java.awt.geom.*;
<font CLASS=keyword>import</font> java.applet.*;
<font CLASS=keyword>import</font> javax.swing.JOptionPane;


<font CLASS=keyword>public</font> <font CLASS=keyword>class</font> GraficoFunzione <font CLASS=keyword>extends</font> Applet {
	private Rectangle2D.Double userBox = new Rectangle2D.Double(); <font CLASS=comment>// user window - l'utente seglie solo le ascisse</font>
	<font CLASS=keyword>private</font> <font CLASS=keyword>int</font> nCampioni;

	
	<font CLASS=keyword>private</font> Line2D.Double asseX = <font CLASS=keyword>new</font> Line2D.Double(), 
	                      asseY = <font CLASS=keyword>new</font> Line2D.Double();

	<font CLASS=keyword>private</font> Line2D.Double lineetta = <font CLASS=keyword>new</font> Line2D.Double();
	
	<font CLASS=keyword>private</font> Color coloreAssi = Color.red;
	<font CLASS=keyword>private</font> Color coloreGrafico = Color.green;
	<font CLASS=keyword>private</font> Color coloreBox = Color.blue;
	<font CLASS=keyword>private</font> BasicStroke mioStroke;

	<font CLASS=keyword>private</font> <font CLASS=keyword>static</font> <font CLASS=keyword>final</font> <font CLASS=keyword>double</font> delta = <font CLASS=numbers>0.05</font>; <font CLASS=comment>// normalizzazione user window</font>
	<font CLASS=keyword>private</font> <font CLASS=keyword>static</font> <font CLASS=keyword>final</font> <font CLASS=keyword>float</font> S = <font CLASS=numbers>0.0</font>f; <font CLASS=comment>// ampiezza BasicStroke</font>

	<font CLASS=keyword>private</font> <font CLASS=keyword>static</font> String nomeFunz;
	
	<font CLASS=keyword>public</font> <font CLASS=keyword>void</font> init() {
		userBox.x = -<font CLASS=numbers>5</font>;
		userBox.width = <font CLASS=numbers>10</font>;
		nCampioni = <font CLASS=numbers>5000</font>;
		
		<font CLASS=comment>//aggiungere istruzioni per permettere all'utente di</font>
		<font CLASS=comment>//specificare l'intervallo delle x ed il numero di campioni</font>
		
		setBox(userBox);
		mioStroke = <font CLASS=keyword>new</font> BasicStroke(S);
	}

	<font CLASS=keyword>public</font> <font CLASS=keyword>void</font> paint(Graphics g) {
		Graphics2D g2 = (Graphics2D)g;
		g2.drawString(nomeFunz, <font CLASS=numbers>20</font>, <font CLASS=numbers>30</font>);
		trasforma(g2, userBox, <font CLASS=numbers>0</font>, <font CLASS=numbers>0</font>, <font CLASS=numbers>1</font>, <font CLASS=numbers>1</font>);
		grafica(g2, userBox);
	}
	
	<font CLASS=keyword>public</font> <font CLASS=keyword>void</font> trasforma(Graphics2D g2, Rectangle2D.Double box, <font CLASS=keyword>double</font> xmin, <font CLASS=keyword>double</font> ymin, <font CLASS=keyword>double</font> xmax, <font CLASS=keyword>double</font> ymax) {
		<font CLASS=keyword>int</font> w = getWidth(), h = getHeight();
		<font CLASS=keyword>double</font> x1 = box.x,
		       y1 = box.y,
		       x2 = box.x + box.width,
		       y2 = box.y + box.height;
		g2.translate(xmin * (w - <font CLASS=numbers>1</font>), ymin * (h - <font CLASS=numbers>1</font>));
		g2.scale(xmax - xmin, ymax - ymin);
		g2.scale((w - <font CLASS=numbers>1</font>) / (x2 - x1), (h - <font CLASS=numbers>1</font>) / (y1 - y2));
		g2.translate(-x1, -y2);

		g2.setStroke(mioStroke);
	}
	
	<font CLASS=keyword>public</font> <font CLASS=keyword>void</font> grafica(Graphics2D g2, Rectangle2D.Double box) {		
		<font CLASS=keyword>double</font> x1 = box.x,
		       y1 = box.y,
		       x2 = box.x + box.width,
		       y2 = box.y + box.height;
		g2.setColor(coloreAssi);
		<font CLASS=comment>/* asse X, se visibile */</font>
		<font CLASS=keyword>if</font>(y1 * y2 &lt;= <font CLASS=numbers>0</font>) {
			asseX.setLine(x1, <font CLASS=numbers>0</font>, x2, <font CLASS=numbers>0</font>);
			g2.draw(asseX);
		}
		<font CLASS=comment>/* asse Y, se visibile */</font>
		<font CLASS=keyword>if</font>(x1 * x2 &lt;= <font CLASS=numbers>0</font>) {
			asseY.setLine(<font CLASS=numbers>0</font>, y1, <font CLASS=numbers>0</font>, y2);
			g2.draw(asseY);
		}
		
		g2.setColor(coloreBox);	
		g2.draw(box);
		
		g2.setColor(coloreGrafico);	
		
		<font CLASS=comment>//codice per graficare la funzione da realizzare</font>
	}
	
	<font CLASS=keyword>private</font> <font CLASS=keyword>static</font> <font CLASS=keyword>double</font> f(<font CLASS=keyword>double</font> x) {
		nomeFunz = <font CLASS=strings>"Math.sin(1/x)"</font>;
		<font CLASS=keyword>return</font> Math.sin(<font CLASS=numbers>1</font>/x);
	}
	
	<font CLASS=keyword>private</font> <font CLASS=keyword>void</font> setBox(Rectangle2D.Double box) {
		<font CLASS=keyword>double</font> y2 = f(box.x);
		<font CLASS=keyword>double</font> y1 = y2;
		<font CLASS=keyword>double</font> passo = box.width / (nCampioni - <font CLASS=numbers>1</font>); <font CLASS=comment>// intervalli = ncampioni - 1</font>
		<font CLASS=keyword>double</font> x2 = box.x + box.width;
		<font CLASS=keyword>for</font>(<font CLASS=keyword>double</font> x = box.x + passo; x &lt;= x2; x += passo) {
			<font CLASS=keyword>double</font> y = f(x);
			<font CLASS=keyword>if</font>(y &gt; y2)
				y2 = y;
			<font CLASS=keyword>else</font> 
				<font CLASS=keyword>if</font>(y &lt; y1)
					y1 = y;
		}
		<font CLASS=keyword>if</font>(y1 == y2) {
			y1 -= delta;
			y2 += delta;
		}
		box.y = y1;
		box.height = y2 - y1;
	}
}



</pre>



</body>
</html>
